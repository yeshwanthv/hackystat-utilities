<project name="jar" default="jar">
  <description>
  Provides the target for building a jar file of the SensorBase.
  </description>

  <import file="build.xml"/>
  <property name="tmp.dir" location="${basedir}/tmp" />
  <property name="tmp.lib.dir" location="${basedir}/tmp-lib" />
 
  <target name="jar" depends="jar-hackystatlogger, jar-stacktrace"/>   

  <target name="jar-hackystatlogger" depends="compile" 
     description="Create hackystatlogger.lib.jar, containing just org.hackystat.utilities.logger code.">
     <!-- Define the directories and distribution name -->
     <mkdir dir="${tmp.lib.dir}" />
     <copy todir="${tmp.lib.dir}">
       <fileset dir="${basedir}/build/classes/">
          <include name="org/hackystat/utilities/logger/**"/>
       </fileset>
     </copy>
   
     <jar destfile="${basedir}/hackystatlogger.lib.jar" basedir="${tmp.lib.dir}">
       <manifest>
         <attribute name="Implementation-Title" value="HackystatLogger"/>
         <attribute name="Implementation-Version" value="${version}"/>
         <attribute name="Implementation-Vendor" value="Collaborative Software Development Laboratory, University of Hawaii"/>
       </manifest>
     </jar>
     <delete dir="${tmp.lib.dir}" />
   </target>  
  
  <target name="jar-stacktrace" depends="compile" 
      description="Create stacktrace.lib.jar, containing just org.hackystat.utilities.stacktrace code.">
      <!-- Define the directories and distribution name -->
      <mkdir dir="${tmp.lib.dir}" />
      <copy todir="${tmp.lib.dir}">
        <fileset dir="${basedir}/build/classes/">
           <include name="org/hackystat/utilities/stacktrace/**"/>
        </fileset>
      </copy>
    
      <jar destfile="${basedir}/stacktrace.lib.jar" basedir="${tmp.lib.dir}">
        <manifest>
          <attribute name="Implementation-Title" value="StackTrace"/>
          <attribute name="Implementation-Version" value="${version}"/>
          <attribute name="Implementation-Vendor" value="Collaborative Software Development Laboratory, University of Hawaii"/>
        </manifest>
      </jar>
      <delete dir="${tmp.lib.dir}" />
    </target>  
</project>

